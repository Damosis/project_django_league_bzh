from django.http import HttpResponse, HttpResponseRedirect
from django.shortcuts import get_object_or_404, render
from django.urls import reverse
from django.views import generic

from .models import Participant


'''def index(request):
    return HttpResponse("Hello, world. You're at the league_bzh index.")'''

def index(request):
    participant_list = Participant.objects.order_by('-reg_date')[:5]
    context = {'participant_list': participant_list}
    return render(request, 'league_bzh/index.html', context)

def detail(request, participant_id):
    return HttpResponse("You're looking at participant %s." % participant_id)

'''def detail(request, participant_id):
    try:
        participant = Participant.objects.get(pk=participant_id)
    except Question.DoesNotExist:
        raise Http404("participant does not exist")
    return render(request, 'league_bzh/detail.html', {'participant': participant})'''

def register(request):
    return HttpResponse("you are registering a participant")

'''def register(request):
    form = ParticipantForm()
    book_formset = BookFormset(instance=Author())

    if request.POST:
        form = ParticipantForm(request.POST)
        if form.is_valid():
            author = form.save()
            book_formset = BookFormset(request.POST, instance=author)
            if book_formset.is_valid():
                book_formset.save()
            return redirect('/index/')

    return render_to_response('addbook.html',{
        'form': form, 'formset': book_formset
    },context_instance=RequestContext(request))'''
